<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>Bidon Vullen</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link href="static/css/main.css" rel="stylesheet">
    <script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCMFGTIvS385CKvB7J8FC5cBala85M9FLQ">
    </script>
	</head>
	<body>

		<section class="page page-map current">

			<h1 class="app-title"><span>Bidon vullen<span></h1>
    <script>

      function getLocation() {
          if (navigator.geolocation) {
              navigator.geolocation.getCurrentPosition(showPosition,showError);
          } else { 
              x.innerHTML = "Geolocation is not supported by this browser.";
          }
      }

      function showPosition(position) {
          initialize(position.coords.latitude, position.coords.longitude);
      }

      function showError(error) {
          switch(error.code) {
              case error.PERMISSION_DENIED:
                  x.innerHTML = "User denied the request for Geolocation."
                  break;
              case error.POSITION_UNAVAILABLE:
                  x.innerHTML = "Location information is unavailable."
                  break;
              case error.TIMEOUT:
                  x.innerHTML = "The request to get user location timed out."
                  break;
              case error.UNKNOWN_ERROR:
                  x.innerHTML = "An unknown error occurred."
                  break;
          }
      }

      function initialize(lat, lng) {
        var mapOptions = {
          center: new google.maps.LatLng(lat, lng),
          zoom: 15
        };
        var map = new google.maps.Map(document.getElementById("map-canvas"),
            mapOptions);
        // Create marker 
        var marker = new google.maps.Marker({
          map: map,
          position: new google.maps.LatLng(lat, lng),
          title: 'U bent hier'
        });

        // Add circle overlay and bind to marker
        var circle = new google.maps.Circle({
          map: map,
          radius: 400,
          fillColor: '#fc4c02',
          strokeWeight: 0
        });
        circle.bindTo('center', marker, 'position');

      }
      // google.maps.event.addDomListener(window, 'load', initialize);
      document.addEventListener('DOMContentLoaded', function () {
        getLocation()
        showPosition();
      });
    </script>
			<div id="map-canvas" class="map"></div>
			
			<div class="center">
				<h2 class="found-a-place">Found a place</h2>
				<button class="button">Add new place</button>
			</div>

		</section>

		<section class="page">


		</section>

		<script id="pagetpl" type="text/ractive">

		</script>

		<script src='static/js/vendor/ractive-min.js'></script> 
		<script src="static/js/vendor/ractive-events-tap-min.js"></script>
		<script src="static/js/vendor/Rest.js"></script>
		<script src="static/js/vendor/Webcam.js"></script>
		<script src="static/js/main.js"></script>
	</body>
</html>